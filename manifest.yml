# Cloud Foundry Docker deployment manifest for OpenClaw
# NOTE: This is a secondary/reference option. The buildpack approach
# (manifest-buildpack.yml) is recommended as it builds from source.
#
# IMPORTANT: There is no official 'openclaw/openclaw' Docker Hub image.
# You must either:
#   - Build locally: docker build -t openclaw/openclaw .
#   - Push to a private registry your CF can access
#   - Use a community image (e.g., alpine/openclaw)
#
# Deploy with: cf push -f manifest.yml
---
applications:
  - name: openclaw
    memory: 2G
    disk_quota: 2G
    instances: 1

    # Docker deployment - update the image to your registry/community image
    docker:
      image: openclaw/openclaw:latest  # TODO: Change to your actual image

    command: bash start.sh

    env:
      NODE_ENV: production
      NODE_OPTIONS: "--max-old-space-size=1536"
      OPENCLAW_STATE_DIR: /home/vcap/app/data
      OPENCLAW_PREFER_PNPM: "1"
      # OPENCLAW_GATEWAY_TOKEN: (set via cf set-env)

    routes:
      - route: openclaw.apps.tas-tdc.kuhn-labs.com

    health-check-type: port
    timeout: 180

    services:
      - openclaw-genai
